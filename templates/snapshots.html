{% extends "base.html" %}

{% block content %}
<div class="container">
    <hgroup>
        <h1>Inventory Velocity</h1>
        <h2>Track sales velocity and stock days remaining (grouped by barcode)</h2>
    </hgroup>

    <article class="filters">
        <div class="grid" style="grid-template-columns: 1fr 1fr 1fr auto; gap: 1rem; align-items: end;">
            <label for="store-filter">
                Store
                <select id="store-filter">
                    <option value="">All Stores</option>
                </select>
            </label>
            <label for="search-input">
                Search
                <input type="search" id="search-input" placeholder="SKU, barcode, or title...">
            </label>
            <label for="velocity-days">
                Velocity Period
                <select id="velocity-days">
                    <option value="7">Last 7 days</option>
                    <option value="14">Last 14 days</option>
                    <option value="30">Last 30 days</option>
                </select>
            </label>
            <button id="trigger-snapshot-btn" class="secondary outline">ðŸ“¸ Snapshot</button>
        </div>
    </article>

    <div class="table-container overflow-auto">
        <table id="velocity-table" class="w-full border-collapse">
            <thead id="table-head">
                <tr>
                    <th>Product</th>
                    <th class="sortable" data-sort="current_stock">Total Stock</th>
                    <th class="sortable" data-sort="velocity">Velocity</th>
                    <th class="sortable sorted-asc" data-sort="days_left">Days Left</th>
                    <th class="sortable" data-sort="store_count">Stores</th>
                </tr>
            </thead>
            <tbody id="products-container">
                <tr>
                    <td colspan="5" class="text-center">Loading...</td>
                </tr>
            </tbody>
        </table>
    </div>

    <div class="pagination-controls grid grid-cols-3 gap-4 mt-4">
        <button id="prev-button" disabled>Previous</button>
        <span id="page-indicator" class="text-center">Page 1 of 1</span>
        <button id="next-button" disabled>Next</button>
    </div>

    <article id="legend" style="margin-top: 1rem; padding: 0.75rem 1rem;">
        <strong>Days Left Legend:</strong>
        <span style="margin-left: 1rem;">ðŸ”´ &lt; 7 days (urgent)</span>
        <span style="margin-left: 1rem;">ðŸŸ¡ 7-30 days (watch)</span>
        <span style="margin-left: 1rem;">ðŸŸ¢ &gt; 30 days (healthy)</span>
        <span style="margin-left: 1rem;">â€” No sales data</span>
    </article>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/snapshots.js"></script>
{% endblock %}