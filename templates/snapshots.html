{% extends "base.html" %}

{% block content %}
<div class="container">
    <hgroup>
        <h1>Inventory Analytics</h1>
        <h2>Review historical stock levels and performance metrics</h2>
    </hgroup>

    <article class="filters">
        <header><strong>Filters</strong></header>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
            <label for="store-filter">
                Store
                <select id="store-filter">
                    <option value="">All Stores</option>
                </select>
            </label>
            <label for="start-date-filter">
                Start Date
                <input type="date" id="start-date-filter">
            </label>
            <label for="end-date-filter">
                End Date
                <input type="date" id="end-date-filter">
            </label>
        </div>

        <details>
            <summary>Advanced Metric Filters</summary>
            <div id="metric-filters" class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-4">
                </div>
        </details>

        <button id="trigger-snapshot-btn" class="secondary outline mt-4">Trigger Snapshot Now</button>
    </article>

    <div class="table-container overflow-auto">
        <table id="snapshots-table" class="w-full border-collapse">
            <thead id="table-head">
                <tr>
                    <th class="sortable" data-sort="title">Product</th>
                    <th class="sortable" data-sort="on_hand">Current Stock</th>
                    <th class="sortable" data-sort="avg_inventory_value">Avg. Inv. Value</th>
                    <th class="sortable" data-sort="stockout_rate">Stockout Rate</th>
                    <th class="sortable" data-sort="dead_stock_ratio">Dead Stock Ratio</th>
                    <th class="sortable" data-sort="stock_turnover">Turnover</th>
                    <th class="sortable" data-sort="stock_health_index">Health Index</th>
                </tr>
            </thead>
            <tbody id="snapshots-container">
                <tr><td colspan="7" class="text-center">Loading analytics...</td></tr>
            </tbody>
        </table>
    </div>

    <div class="pagination-controls grid grid-cols-3 gap-4 mt-4">
        <button id="prev-button" disabled>Previous</button>
        <span id="page-indicator" class="text-center">Page 1 of 1</span>
        <button id="next-button" disabled>Next</button>
    </div>

</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/snapshots.js"></script>
{% endblock %}