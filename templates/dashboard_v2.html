{% extends "base.html" %}

{% block content %}
<div class="container-fluid">
    <hgroup>
        <h1>Orders Dashboard</h1>
        <h2>A unified view of orders across all stores.</h2>
    </hgroup>
    
    <article class="filter-container">
        <section id="metrics-container" class="grid"></section>
        <section class="controls-grid">
            <input type="search" id="search-input" name="search" placeholder="Search Order Name...">
            <details role="list" class="dropdown"><summary aria-haspopup="listbox">Stores</summary><ul role="listbox" id="store-filter-list"><li>Loading...</li></ul></details>
            
            <!-- MODIFIED: Removed hardcoded financial statuses -->
            <details role="list" class="dropdown">
                <summary aria-haspopup="listbox">Financial Status</summary>
                <ul role="listbox" id="financial-status-filter"><li>Loading...</li></ul>
            </details>

            <!-- MODIFIED: Removed hardcoded fulfillment statuses -->
            <details role="list" class="dropdown">
                <summary aria-haspopup="listbox">Fulfillment</summary>
                <ul role="listbox" id="fulfillment-status-filter"><li>Loading...</li></ul>
            </details>

            <details role="list" class="dropdown"><summary aria-haspopup="listbox">Notes</summary><ul role="listbox" id="has-note-filter"><li><label><input type="radio" name="note" value="" checked> All</label></li><li><label><input type="radio" name="note" value="true"> Has Note</label></li><li><label><input type="radio" name="note" value="false"> No Note</label></li></ul></details>
            <button id="column-visibility-button" class="outline">Columns</button>
            <input type="search" id="tags-input" name="tags" placeholder="Filter by tags...">
            <input type="date" id="start-date">
            <input type="date" id="end-date">
            <button id="export-button">Export</button>
            <button id="reset-filters" class="secondary outline">Reset</button>
        </section>
    </article>
    
    <article id="orders-table-container" aria-busy="true"><p>Loading...</p></article>

    <div class="grid pagination-controls">
        <button id="prev-button" class="secondary outline" disabled>&larr; Previous</button>
        <span id="page-indicator">Page 1</span>
        <button id="next-button" class="secondary outline">Next &rarr;</button>
    </div>
    
    <dialog id="column-modal">
      <article>
        <header><button class="close" aria-label="Close" data-target="column-modal"></button><strong>Show/Hide Columns</strong></header>
        <div id="column-visibility-list" class="column-list"></div>
      </article>
    </dialog>
</div>
{% endblock %}

{% block scripts %}
<script src="/static/js/config.js"></script>
<script src="/static/js/dashboard_v2.js"></script>
{% endblock %}
